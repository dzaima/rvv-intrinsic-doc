# copy(JSON.stringify(query_found.flatMap(c=>c.variationsIncl).map(c=>[c.name,c.ret.type,[],c.args.map(c=>c.type)])))
bqnlibsâ€¿in â† â€¢args
âŸ¨Parse,ExportâŸ© â† â€¢Import bqnlibsâ€¢file.At"json.bqn"
fns â† Parse â€¢FChars in

ts â† {Â¬âŠ‘'*'âˆŠğ•©}Â¨âŠ¸/ â·(1âŠ‘Â¨fns)âˆ¾âˆ¾3âŠ‘Â¨fns
vts â† {(ğ•©â‰¢"void")âˆ§'v'â‰¡âŠ‘ğ•©}Â¨âŠ¸/ ts

Fixup â† {
  ğ•© {ğ•©/ËœÂ¬âˆ¨âŸœÂ»âŸ2 0â€¿0âˆ¾Ëœ"_rm"â·ğ•©}â†© # _rm not required in tested clang
  ğ•©
}

CLn â† { baseâ€¿retâ€¿tsâ€¿argsğ•Ši:
  inv â† âˆ¾âŸ¨Fixup base, "(", 1â†“âˆ¾','âˆ¾Â¨{'*'â‰¡Â¯1âŠ‘ğ•©?"0";'v'â‰¡âŠ‘ğ•©?"v_"âˆ¾ğ•©;"0"}Â¨ args, ");"âŸ©
  âŸ¨{retâ‰¡"void"? inv; âˆ¾âŸ¨ret, " r",â€¢Repr i, " = ", invâŸ©}âŸ©
}

testC â† "test.c"
testC â€¢FLines âŸ¨
  "#include<riscv_vector.h>"
  "#include<inttypes.h>"
  "#define float64_t double"
  "#define float32_t float"
  "#define float16_t _Float16"
  "void f() {"
  âˆ¾{ğ•©âˆ¾" v_"âˆ¾ğ•©âˆ¾";"}Â¨ vts
âŸ©âˆ¾(âˆ¾CLnÂ¨âŸœâ†•âŸœâ‰  fns)âˆ¾âŸ¨"}"âŸ©
câ€¿oâ€¿e â† â€¢SHâŸ¨
  "clang", "-c"
  "--target=riscv64-linux-gnu"
  "-menable-experimental-extensions"
  "-march=rv64gcvzvfh0p1"
  "-ferror-limit=999999"
  testC
âŸ©

â€¢Out {0â‰¡c? âˆ¾âŸ¨"Passed ", â€¢Repr â‰ fns, "!"âŸ©; "Exit code: "âˆ¾â€¢Repr c}
â€¢Out o
â€¢Out e